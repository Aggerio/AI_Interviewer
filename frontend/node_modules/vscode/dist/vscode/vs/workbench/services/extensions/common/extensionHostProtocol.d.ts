import { URI, UriDto, UriComponents } from '../../../../base/common/uri.js';
import { ExtensionIdentifier, IExtensionDescription } from '../../../../platform/extensions/common/extensions.js';
import { LogLevel, ILoggerResource } from '../../../../platform/log/common/log.js';
import { IRemoteConnectionData } from '../../../../platform/remote/common/remoteAuthorityResolver.js';

interface IExtensionDescriptionDelta {
    readonly toRemove: ExtensionIdentifier[];
    readonly toAdd: IExtensionDescription[];
    readonly addActivationEvents: {
        [extensionId: string]: string[];
    };
    readonly myToRemove: ExtensionIdentifier[];
    readonly myToAdd: ExtensionIdentifier[];
}
interface IExtensionHostInitData {
    version: string;
    quality: string | undefined;
    commit?: string;
    /**
     * When set to `0`, no polling for the parent process still running will happen.
     */
    parentPid: number | 0;
    environment: IEnvironment;
    workspace?: IStaticWorkspaceData | null;
    activationEvents: {
        [extensionId: string]: string[];
    };
    allExtensions: IExtensionDescription[];
    myExtensions: ExtensionIdentifier[];
    nlsBaseUrl?: URI;
    telemetryInfo: {
        readonly sessionId: string;
        readonly machineId: string;
        readonly firstSessionDate: string;
        readonly msftInternal?: boolean;
    };
    logLevel: LogLevel;
    loggers: UriDto<ILoggerResource>[];
    logsLocation: URI;
    autoStart: boolean;
    remote: {
        isRemote: boolean;
        authority: string | undefined;
        connectionData: IRemoteConnectionData | null;
    };
    consoleForward: {
        includeStack: boolean;
        logNative: boolean;
    };
    uiKind: UIKind;
    messagePorts?: ReadonlyMap<string, MessagePortLike>;
}
interface IEnvironment {
    isExtensionDevelopmentDebug: boolean;
    appName: string;
    appHost: string;
    appRoot?: URI;
    appLanguage: string;
    extensionTelemetryLogResource: URI;
    isExtensionTelemetryLoggingOnly: boolean;
    appUriScheme: string;
    extensionDevelopmentLocationURI?: URI[];
    extensionTestsLocationURI?: URI;
    globalStorageHome: URI;
    workspaceStorageHome: URI;
    useHostProxy?: boolean;
    skipWorkspaceStorageLock?: boolean;
    extensionLogLevel?: [string, string][];
}
interface IStaticWorkspaceData {
    id: string;
    name: string;
    transient?: boolean;
    configuration?: UriComponents | null;
    isUntitled?: boolean | null;
}
interface MessagePortLike {
    postMessage(message: any, transfer?: any[]): void;
    addEventListener(type: 'message', listener: (e: any) => any): void;
    removeEventListener(type: 'message', listener: (e: any) => any): void;
    start(): void;
}
declare enum UIKind {
    Desktop = 1,
    Web = 2
}

export { IEnvironment, IExtensionDescriptionDelta, IExtensionHostInitData, IStaticWorkspaceData, MessagePortLike, UIKind };
